<!DOCTYPE html>
<html>
<head>
    <title>AION Quantum Supreme v10</title>
    <style>
        body { font-family: Arial; background: #111; color: #0f0; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #0f0; padding: 8px; text-align: center; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>AION Quantum Supreme v10</h1>
    <h2>Mode: <span id="mode">{{ mode }}</span></h2>
    <h2>Balance: $<span id="balance">{{ balance }}</span></h2>
    
    <button onclick="executeTrade()">Execute Trade</button>
    <button onclick="runSimulation()">Run Simulation</button>
    <button onclick="toggleMode()">Toggle Mode</button>

    <h2>Trades</h2>
    <table id="tradeTable">
        <tr>
            <th>Strategy</th>
            <th>Position Size</th>
            <th>Profit</th>
            <th>Balance</th>
        </tr>
        {% for trade in trades %}
        <tr>
            <td>{{ trade.strategy }}</td>
            <td>{{ trade.position_size | round(2) }}</td>
            <td>{{ trade.profit }}</td>
            <td>{{ trade.balance }}</td>
        </tr>
        {% endfor %}
    </table>

    <script>
        function executeTrade(){
            fetch('/execute_trade', {method:'POST'})
            .then(res=>res.json())
            .then(trade=>{
                let table = document.getElementById('tradeTable');
                let row = table.insertRow(-1);
                row.insertCell(0).innerHTML = trade.strategy;
                row.insertCell(1).innerHTML = trade.position_size.toFixed(2);
                row.insertCell(2).innerHTML = trade.profit.toFixed(2);
                row.insertCell(3).innerHTML = trade.balance.toFixed(2);
                document.getElementById('balance').innerText = trade.balance.toFixed(2);
            });
        }

        function runSimulation(){
            let days = prompt("Enter simulation days", 30);
            let balance = prompt("Enter initial balance", 50);
            fetch('/run_simulation', {
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({days:days,balance:balance})
            }).then(res=>res.json())
            .then(data=>{alert("Simulation completed! Check console for results."); console.log(data);});
        }

        function toggleMode(){
            let newMode = document.getElementById('mode').innerText === 'PAPER' ? 'REAL' : 'PAPER';
            fetch('/set_mode',{
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({mode:newMode})
            }).then(res=>res.json())
            .then(res=>{
                document.getElementById('mode').innerText = res.mode;
            });
        }
    </script>
</body>
</html>
